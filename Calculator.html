<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>محاسبه قیمت مرکز تماس</title>
    <link rel="stylesheet" href="calculator.css">
</head>
<body>
    <div class="calculator-container">
        <header class="calculator-header">
            <h1 class="calculator-title">محاسبه قیمت نصب و راه‌اندازی مرکز تماس</h1>
            <p class="calculator-subtitle">لطفاً گزینه‌های مورد نیاز خود را انتخاب کنید</p>
        </header>
        
        <div class="calculator-body">
            <div class="form-sections">
                <!-- باکس 1: نصب و راه اندازی مرکز تماس -->
                <div class="section">
                    <h2>نصب و راه اندازی مرکز تماس</h2>
                    
                    <div class="input-group">
                        <label>
                            <input type="number" id="userCount" min="1" value="10" onchange="calculatePrice()">
                            <span>تعداد کاربران</span>
                        </label>
                    </div>
                    
                    <div class="radio-group">
                        <label>
                            <input type="radio" name="vmOption" value="yes" checked onchange="calculatePrice()">
                            <span>ماشین مجازی دارم</span>
                        </label>
                        <label>
                            <input type="radio" name="vmOption" value="no" onchange="calculatePrice()">
                            <span>ماشین مجازی ندارم</span>
                        </label>
                    </div>
                    
                    <div class="note">
                        قیمت پایه: ۲۲.۵۰۰.۰۰۰ تومان تا ده کاربر (با ماشین مجازی)<br>
                        قیمت پایه: ۳۲.۸۰۰.۰۰۰ تومان تا ده کاربر (بدون ماشین مجازی)<br>
                        هر کاربر اضافه: ۵۰۰.۰۰۰ تومان
                    </div>
                </div>
                
                <!-- باکس 2: پشتیبانی -->
                <div class="section">
                    <h2>پشتیبانی</h2>
                    
                    <label>
                        <input type="checkbox" id="supportNeeded" onchange="toggleSupport(); calculatePrice()">
                        <span>پشتیبانی می‌خواهم</span>
                    </label>
                    
                    <div id="supportSection" style="display: none;">
                        <div class="radio-group">
                            <label>
                                <input type="radio" name="supportDuration" value="6" checked onchange="calculatePrice()">
                                <span>۶ ماهه</span>
                            </label>
                            <label>
                                <input type="radio" name="supportDuration" value="12" onchange="calculatePrice()">
                                <span>۱ ساله</span>
                            </label>
                        </div>
                        
                        <div class="input-group">
                            <label>
                                <input type="number" id="supportUserCount" min="6" value="6" onchange="calculatePrice()">
                                <span>تعداد کاربران پشتیبانی</span>
                            </label>
                        </div>
                        
                        <div class="note">
                            پشتیبانی ۶ ماهه: ۲۰.۰۰۰.۰۰۰ تومان (تا ۶ کاربر)<br>
                            پشتیبانی ۱ ساله: ۳۵.۰۰۰.۰۰۰ تومان (تا ۶ کاربر)<br>
                            هر کاربر اضافه ۶ ماهه: ۵۰۰.۰۰۰ تومان<br>
                            هر کاربر اضافه ۱ ساله: ۱.۰۰۰.۰۰۰ تومان
                        </div>
                    </div>
                </div>
                
                <!-- باکس 3: پشتیبانی حضوری -->
                <div class="section">
                    <h2>پشتیبانی حضوری</h2>
                    
                    <label>
                        <input type="checkbox" id="onsiteSupport" onchange="toggleOnsite(); calculatePrice()">
                        <span>پشتیبانی حضوری می‌خواهم</span>
                    </label>
                    
                    <div id="onsiteSection" style="display: none;">
                        <div class="input-group">
                            <label>
                                <input type="number" id="onsiteDays" min="1" value="1" onchange="calculatePrice()">
                                <span>تعداد روزهای حضور</span>
                            </label>
                        </div>
                        
                        <div class="note">
                            هزینه هر روز حضور: ۳.۰۰۰.۰۰۰ تومان
                        </div>
                    </div>
                </div>
                
                <!-- باکس 4: ارتباط بین شعب -->
                <div class="section">
                    <h2>ارتباط بین شعب</h2>
                    
                    <label>
                        <input type="checkbox" id="branchConnection" onchange="toggleBranch(); calculatePrice()">
                        <span>ارتباط بین شعب می‌خواهم</span>
                    </label>
                    
                    <div id="branchSection" style="display: none;">
                        <div class="input-group">
                            <label>
                                <input type="number" id="branchCount" min="1" value="1" onchange="calculatePrice()">
                                <span>تعداد شعب</span>
                            </label>
                        </div>
                        
                        <div class="note">
                            هزینه هر شعبه: ۱.۳۰۰.۰۰۰ تومان
                        </div>
                    </div>
                </div>
                
                <!-- باکس 5: خدمات تکمیلی -->
                <div class="section">
                    <h2>خدمات تکمیلی</h2>
                    
                    <div class="checkbox-list">
                        <label>
                            <input type="checkbox" id="mikrotik" onchange="calculatePrice()">
                            <span>راه اندازی کامل روتر میکروتیک</span>
                        </label>
                        <label>
                            <input type="checkbox" id="gateway" onchange="calculatePrice()">
                            <span>راه اندازی گیت وی</span>
                        </label>
                        <label>
                            <input type="checkbox" id="crm" onchange="calculatePrice()">
                            <span>اتصال به CRM</span>
                        </label>
                        <label>
                            <input type="checkbox" id="sms" onchange="calculatePrice()">
                            <span>اتصال به سامانه پیامکی</span>
                        </label>
                    </div>
                    
                    <div class="note">
                        راه اندازی روتر میکروتیک: ۸.۰۰۰.۰۰۰ تومان<br>
                        راه اندازی گیت وی: ۳.۵۰۰.۰۰۰ تومان<br>
                        اتصال به CRM: ۷.۰۰۰.۰۰۰ تومان<br>
                        اتصال به سامانه پیامکی: ۷.۰۰۰.۰۰۰ تومان
                    </div>
                </div>
            </div>
            
            <!-- سایدبار محاسبه قیمت -->
            <div class="total-section">
                <h2>جزئیات قیمت</h2>
                
                <div id="priceBreakdown">
                    <!-- JavaScript will fill this -->
                </div>
                
                <div class="total-price-container">
                    <div class="total-label">مبلغ کل:</div>
                    <div id="totalPrice">۰ تومان</div>
                </div>
                
                <button onclick="submitForm()">استعلام قیمت</button>
            </div>
        </div>
    </div>
    
    <script>
        // Toggle functions
        function toggleSupport() {
            document.getElementById('supportSection').style.display = 
                document.getElementById('supportNeeded').checked ? 'block' : 'none';
        }
        
        function toggleOnsite() {
            document.getElementById('onsiteSection').style.display = 
                document.getElementById('onsiteSupport').checked ? 'block' : 'none';
        }
        
        function toggleBranch() {
            document.getElementById('branchSection').style.display = 
                document.getElementById('branchConnection').checked ? 'block' : 'none';
        }
        
        // Price calculation
        function calculatePrice() {
            let totalPrice = 0;
            let breakdown = [];
            
            // 1. Base installation price
            const userCount = parseInt(document.getElementById('userCount').value) || 10;
            const hasVM = document.querySelector('input[name="vmOption"]:checked').value === 'yes';
            
            let baseInstallPrice = hasVM ? 22500000 : 32800000;
            let extraUserFee = 0;
            
            if (userCount > 10) {
                extraUserFee = (userCount - 10) * 500000;
            }
            
            totalPrice += baseInstallPrice + extraUserFee;
            
            breakdown.push({
                title: `نصب و راه‌اندازی مرکز تماس (${userCount} کاربر)`,
                price: baseInstallPrice + extraUserFee
            });
            
            // 2. Support
            if (document.getElementById('supportNeeded').checked) {
                const supportUsers = parseInt(document.getElementById('supportUserCount').value) || 6;
                const supportMonths = document.querySelector('input[name="supportDuration"]:checked').value === '6' ? 6 : 12;
                
                let supportBasePrice = supportMonths === 6 ? 20000000 : 35000000;
                let extraSupportUserFee = 0;
                
                if (supportUsers > 6) {
                    extraSupportUserFee = (supportUsers - 6) * (supportMonths === 6 ? 500000 : 1000000);
                }
                
                totalPrice += supportBasePrice + extraSupportUserFee;
                
                breakdown.push({
                    title: `پشتیبانی ${supportMonths} ماهه (${supportUsers} کاربر)`,
                    price: supportBasePrice + extraSupportUserFee
                });
            }
            
            // 3. Onsite support
            if (document.getElementById('onsiteSupport').checked) {
                const onsiteDays = parseInt(document.getElementById('onsiteDays').value) || 1;
                const onsitePrice = onsiteDays * 3000000;
                
                totalPrice += onsitePrice;
                
                breakdown.push({
                    title: `پشتیبانی حضوری (${onsiteDays} روز)`,
                    price: onsitePrice
                });
            }
            
            // 4. Branch connection
            if (document.getElementById('branchConnection').checked) {
                const branchCount = parseInt(document.getElementById('branchCount').value) || 1;
                const branchPrice = branchCount * 1300000;
                
                totalPrice += branchPrice;
                
                breakdown.push({
                    title: `ارتباط بین شعب (${branchCount} شعبه)`,
                    price: branchPrice
                });
            }
            
            // 5. Additional services
            const additionalServices = [
                { id: 'mikrotik', title: 'راه اندازی کامل روتر میکروتیک', price: 8000000 },
                { id: 'gateway', title: 'راه اندازی گیت وی', price: 3500000 },
                { id: 'crm', title: 'اتصال به CRM', price: 7000000 },
                { id: 'sms', title: 'اتصال به سامانه پیامکی', price: 7000000 }
            ];
            
            additionalServices.forEach(service => {
                if (document.getElementById(service.id).checked) {
                    totalPrice += service.price;
                    breakdown.push({
                        title: service.title,
                        price: service.price
                    });
                }
            });
            
            // Update UI
            updatePriceBreakdown(breakdown);
            document.getElementById('totalPrice').textContent = formatPrice(totalPrice) + ' تومان';
        }
        
        function updatePriceBreakdown(breakdown) {
            const container = document.getElementById('priceBreakdown');
            container.innerHTML = '';
            
            breakdown.forEach(item => {
                const div = document.createElement('div');
                div.innerHTML = `<span>${item.title}</span><strong>${formatPrice(item.price)} تومان</strong>`;
                container.appendChild(div);
            });
        }
        
        function formatPrice(price) {
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
        
        function submitForm() {
            alert('درخواست شما با موفقیت ثبت شد.');
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            calculatePrice();
        });
    </script>
</body>
</html>
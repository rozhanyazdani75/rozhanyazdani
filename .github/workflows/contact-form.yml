# فایل: .github/workflows/contact-form.yml
name: Contact Form to Telegram

on:
  repository_dispatch:
    types: [contact_form_submit]

jobs:
  send-to-telegram:
    runs-on: ubuntu-latest
    
    steps:
      - name: Send Message to Telegram
        run: |
          # ساخت پیام فارسی
          MESSAGE="🔔 پیام جدید از وبسایت روژان یزدانی
          
          👤 نام: ${{ github.event.client_payload.name }}
          📧 ایمیل: ${{ github.event.client_payload.email }}
          📱 تلفن: ${{ github.event.client_payload.phone }}
          
          💬 پیام:
          ${{ github.event.client_payload.message }}
          
          ⏰ تاریخ: $(date '+%Y-%m-%d %H:%M:%S')
          🌐 منبع: rozhanyazdani75.github.io"
          
          # ارسال به تلگرام
          curl -X POST \
            "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            -H "Content-Type: application/json" \
            -d "{
              \"chat_id\": \"${{ secrets.TELEGRAM_CHAT_ID }}\",
              \"text\": \"$MESSAGE\",
              \"parse_mode\": \"HTML\"
            }"
          
      - name: Log Success
        run: echo "✅ پیام با موفقیت به تلگرام ارسال شد!"